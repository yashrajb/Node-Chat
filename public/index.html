<!doctype html>
<html>
    <head>
        <title>Join | Chap App</title>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>        
        <link rel="stylesheet" href="/css/style.css"/>
    </head>

    <body class="centered-form">

        <div class="centered-form__form">
            <form action="/chat.html" enctype="multipart/form-data">
            <div class="form-field">
                <h3>Join a chat room</h3>
            </div>
            <div class="form-field">
                <label>Username</label>
                <input type="text" name="username" autofocus/>
            </div>
            <div class="form-field">
                <label>Chat Room</label>
                <input type="text" name="room"/>
            </div>
            <div class="form-field">
                    <lable>Active Rooms</lable>
                    <div class="active-room">
                        <select id="rooms" name="join">
                        <option value="create_room">Create Room</option>
                        </select>
                    </div>
                </div>
            <div class="form-field">
                <button type="submit">Join</button>
            </div>
        </form>
        </div>
        <script src="/socket.io/socket.io.js"></script>
        <script src="/js/jquery.min.js"></script>
        <script src="/js/mustache.js"></script>
        <script>
        var socket = io();
        socket.on("activeRooms",function(rooms){
        
            var selectElement = jQuery("#rooms");
            if(rooms.length > 0){

            rooms.forEach(function(room){
                selectElement.append(`<option value="${room}">${room}</option>`);           
            });

            }
            
            selectElement.css({"width":"100%","marginTop":"10px"});
            $(".active-room").html(selectElement);


        });
        </script>
    </body>

</html>